<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bingo Pro</title>

<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        background: #e8e8e8;
        text-align: center;
        transition: 0.4s;
    }

    .card {
        background: white;
        padding: 20px;
        border-radius: 15px;
        max-width: 450px;
        margin: auto;
        box-shadow: 0 0 15px rgba(0,0,0,0.12);
        transition: 0.3s;
    }

    .hidden { display:none; }

    h2 { margin-top: 0; }

    /* N칰mero grande */
    #currentNumber {
        font-size: 80px;
        color: #25D366;
        font-weight: bold;
        margin: 20px 0;
    }

    /* 칔ltimos n칰meros */
    #lastNumbers {
        margin-bottom: 20px;
        font-size: 20px;
        font-weight: bold;
        color: #444;
    }

    button {
        padding: 15px;
        width: 100%;
        border: none;
        font-size: 18px;
        border-radius: 10px;
        cursor: pointer;
        margin-bottom: 15px;
    }

    #drawBtn { background: #25D366; color:white; }
    #resetBtn { background: #d9534f; color:white; }
    #shareBtn { background:#0088ff; color:white; }

    /* Historial */
    .numbersBox {
        margin-top: 20px;
        background: #f7f7f7;
        border-radius: 10px;
        padding: 15px;
        min-height: 80px;
        box-shadow: inset 0 0 8px rgba(0,0,0,0.1);
    }
    .numberItem {
        display: inline-block;
        background: #25D366;
        color: white;
        padding: 8px 12px;
        margin: 5px;
        border-radius: 8px;
        font-size: 18px;
        font-weight: bold;
    }

    /* Animaci칩n bola */
    #ball {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background:#25D366;
        margin: auto;
        margin-top: 15px;
        animation: spin 1.2s infinite linear;
        color:white;
        line-height:80px;
        font-size:35px;
        font-weight:bold;
        display:none;
    }

    @keyframes spin {
        from { transform:rotate(0deg); }
        to { transform:rotate(360deg); }
    }

    /* Modo oscuro */
    body.dark { background:#111; color:white; }
    body.dark .card { background:#222; color:white; }
    body.dark .numbersBox { background:#333; }
</style>
</head>
<body>

<!-- PANTALLA INICIO -->
<div id="startScreen" class="card">
    <h2>游꿣 BINGO CALOA</h2>
    <p>Selecciona el modo</p>

    <button onclick="openAdmin()">游꿑 MODO ADMIN</button>
    <button onclick="openPlayer()">游 MODO JUGADOR</button>
</div>

<!-- PANEL ADMIN -->
<div id="adminPanel" class="card hidden">

    <button onclick="goHome()">拘勇 Volver</button>

    <h2>游꿑 Panel Admin</h2>

    <div id="ball"></div>

    <div id="currentNumber">--</div>

    <div id="lastNumbers">칔ltimos: --</div>

    <button id="drawBtn" onclick="drawNumber()">游 Sacar n칰mero</button>
    <button id="resetBtn" onclick="resetGame()">游대 Reiniciar partida</button>
    <button id="shareBtn" onclick="shareWA()">游닋 Compartir por WhatsApp</button>
    <button onclick="toggleDark()">游깿 Modo oscuro</button>

    <h3>N칰meros salidos:</h3>
    <div class="numbersBox" id="history"></div>
</div>

<!-- CART칍N JUGADOR -->
<div id="playerPanel" class="card hidden">
    <button onclick="goHome()">拘勇 Volver</button>
    <h2>游 Cart칩n de Jugador</h2>
    <p>Genera tu cart칩n</p>

    <button onclick="generateCard()">游빌 Nuevo Cart칩n</button>

    <div id="playerCard"></div>

    <button onclick="toggleDark()">游깿 Modo oscuro</button>
</div>

<script>
let numbers = Array.from({length:75}, (_,i)=>i+1);
let used = [];
let audio = new Audio("https://www.soundjay.com/buttons/sounds/beep-07.mp3");

function goHome(){
    document.getElementById("startScreen").classList.remove("hidden");
    document.getElementById("adminPanel").classList.add("hidden");
    document.getElementById("playerPanel").classList.add("hidden");
}

function openAdmin(){
    document.getElementById("startScreen").classList.add("hidden");
    document.getElementById("adminPanel").classList.remove("hidden");
}

function openPlayer(){
    document.getElementById("startScreen").classList.add("hidden");
    document.getElementById("playerPanel").classList.remove("hidden");
}

function drawNumber(){
    if(numbers.length === 0){
        alert("Ya salieron todos los n칰meros");
        return;
    }

    document.getElementById("ball").style.display = "block";

    setTimeout(()=>{
        let index = Math.floor(Math.random()*numbers.length);
        let number = numbers[index];

        numbers.splice(index,1);
        used.push(number);

        document.getElementById("ball").style.display = "none";
        document.getElementById("currentNumber").innerHTML = number;
        audio.play();

        updateHistory();
        updateLast();
        readNumber(number);

    }, 1200);
}

function updateHistory(){
    let box = document.getElementById("history");
    box.innerHTML = "";
    used.sort((a,b)=>a-b).forEach(num=>{
        let d = document.createElement("div");
        d.className="numberItem";
        d.textContent=num;
        box.appendChild(d);
    });
}

function updateLast(){
    let last = used.slice(-5);
    document.getElementById("lastNumbers").innerHTML =
        "칔ltimos: " + last.join(", ");
}

function resetGame(){
    if(!confirm("쯉eguro que deseas reiniciar?")) return;

    numbers = Array.from({length:75}, (_,i)=>i+1);
    used = [];
    document.getElementById("history").innerHTML="";
    document.getElementById("currentNumber").innerHTML="--";
    document.getElementById("lastNumbers").innerHTML="칔ltimos: --";
}

function shareWA(){
    let text = `Panel de Bingo activo 游꿣\n칔ltimo n칰mero: ${used[used.length-1] || "--"}\nLink: ${window.location.href}`;
    window.location.href = "https://wa.me/?text="+encodeURIComponent(text);
}

function toggleDark(){
    document.body.classList.toggle("dark");
}

function generateCard(){
    let nums = [];
    while(nums.length<24){
        let n = Math.floor(Math.random()*75)+1;
        if(!nums.includes(n)) nums.push(n);
    }

    let cardHTML = "<h3>Tu cart칩n:</h3><div>";
    nums.forEach(n=>{
        cardHTML += `<div class="numberItem">${n}</div>`;
    });
    cardHTML += "</div>";

    document.getElementById("playerCard").innerHTML = cardHTML;
}

function readNumber(n){
    let msg = new SpeechSynthesisUtterance("N칰mero " + n);
    msg.lang = "es-ES";
    speechSynthesis.speak(msg);
}
</script>

</body>
</html>
