<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bingo BritÃ¡nico 90</title>
<style>
body{margin:0;font-family:Arial;background:#000;color:#fff;text-align:center}
header{padding:10px;background:#111}
h1{color:#00ff99}
#bola{font-size:90px;margin:10px}
button{padding:12px 18px;margin:5px;font-size:16px;border:none;border-radius:8px;background:#00ff99}
.panel{margin:10px}
.carton{display:grid;grid-template-columns:repeat(9,1fr);gap:4px;margin:10px auto;max-width:360px}
.celda{border:1px solid #444;height:32px;line-height:32px}
.marcado{background:#00ff99;color:#000;font-weight:bold}
.salido{background:#333}
#historial{font-size:12px;max-height:60px;overflow:auto}
.hidden{display:none}
</style>
</head>

<body>

<header>
<h1>ğŸ± Bingo BritÃ¡nico 90</h1>
<div id="bola">â€“</div>
</header>

<div class="panel">
<button onclick="startAuto()">â–¶ Auto</button>
<button onclick="stopAuto()">â¸ Pausa</button>
<button onclick="sacar()">ğŸ² Manual</button>
<button onclick="reset()">ğŸ” Reiniciar</button>
</div>

<div class="panel">
<button onclick="nuevoCarton()">ğŸ§¾ Nuevo cartÃ³n</button>
<button onclick="cantar()">ğŸ“£ CANTAR BINGO</button>
<button onclick="compartir()">ğŸ“² Compartir</button>
</div>

<div id="historial"></div>
<div id="cartones"></div>

<script>
let pool=[...Array(90).keys()].map(i=>i+1)
let salidos=[]
let timer=null
let tiempo=4000

function sacar(){
 if(!pool.length)return alert("Fin del bingo")
 let i=Math.floor(Math.random()*pool.length)
 let n=pool.splice(i,1)[0]
 salidos.push(n)
 document.getElementById("bola").innerText=n
 document.getElementById("historial").innerText="Salidos: "+salidos.join(", ")
 speechSynthesis.speak(new SpeechSynthesisUtterance("NÃºmero "+n))
 document.querySelectorAll(".celda").forEach(c=>{
  if(c.innerText==n)c.classList.add("salido")
 })
}

function startAuto(){
 if(timer)return
 timer=setInterval(sacar,tiempo)
}

function stopAuto(){clearInterval(timer);timer=null}

function reset(){
 stopAuto()
 pool=[...Array(90).keys()].map(i=>i+1)
 salidos=[]
 document.getElementById("bola").innerText="â€“"
 document.getElementById("historial").innerText=""
 document.getElementById("cartones").innerHTML=""
}

function nuevoCarton(){
 let nums=[]
 while(nums.length<15){
  let n=Math.floor(Math.random()*90)+1
  if(!nums.includes(n))nums.push(n)
 }
 nums.sort((a,b)=>a-b)

 let grid=Array(27).fill("")
 nums.forEach(n=>{
  let c=Math.floor((n-1)/10)
  let p
  do{p=Math.floor(Math.random()*3)*9+c}while(grid[p])
  grid[p]=n
 })

 let div=document.createElement("div")
 div.className="carton"
 grid.forEach(v=>{
  let d=document.createElement("div")
  d.className="celda"
  if(v){
   d.innerText=v
   d.onclick=()=>{
    if(salidos.includes(v))d.classList.toggle("marcado")
   }
  }
  div.appendChild(d)
 })
 document.getElementById("cartones").appendChild(div)
}

function cantar(){
 alert("ğŸ‰ BINGO CANTADO\nEl anfitriÃ³n debe verificar el cartÃ³n.")
}

function compartir(){
 window.open(`https://wa.me/?text=BINGO%2090%20en%20vivo:%20${location.href}`)
}
</script>

</body>
</html>